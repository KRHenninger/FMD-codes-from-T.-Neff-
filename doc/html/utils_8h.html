<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FMD: misc/utils.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>misc/utils.h File Reference</h1>  </div>
</div>
<div class="contents">
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;zlib.h&gt;</code><br/>

<p><a href="utils_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a35b218ad75944a14eabbb6381ca2e970">svn_version</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get current SVN version  <a href="#a35b218ad75944a14eabbb6381ca2e970"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#afef28a69be6bfcf3523c2875ccab3ab7">createinfo</a> (int argc, char *argv[])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">save info about running process  <a href="#afef28a69be6bfcf3523c2875ccab3ab7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#ae3c710edac30cf257199e6595212a75a">fprintinfo</a> (FILE *fp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">print info about running process  <a href="#ae3c710edac30cf257199e6595212a75a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a109d01ec3cb7ea341ed78e31316661b8">gzprintinfo</a> (gzFile fp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">print info about running process  <a href="#a109d01ec3cb7ea341ed78e31316661b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#acb75231d7af21b8640d6850df286aaa2">hostname</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns string with hostname  <a href="#acb75231d7af21b8640d6850df286aaa2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#ac3e439e4220ebb26c7bf1bffc5665795">curdate</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns string with current time and date  <a href="#ac3e439e4220ebb26c7bf1bffc5665795"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a8a337ab7687846825969429634871de6">usertime</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns process user time in seconds  <a href="#a8a337ab7687846825969429634871de6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#af86aada130a5db5b0f52154718d67c44">stripstr</a> (char *str, const char *strip)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">strips strip from str  <a href="#af86aada130a5db5b0f52154718d67c44"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#ab513af03cb4d827e200043bbc98cad12">strjoin</a> (const char *stra, const char *strb)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">join two strings  <a href="#ab513af03cb4d827e200043bbc98cad12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a80285197256014b2324f0b874a91cb19">fileexists</a> (const char *fname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check if file exists and is readable (returns 0 for success)  <a href="#a80285197256014b2324f0b874a91cb19"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a91bd1e9936bf548fc21c811e258c81e9">ensuredir</a> (const char *dirname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">check for existence, create if not of directory  <a href="#a91bd1e9936bf548fc21c811e258c81e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a7fcfe94986a09242c5b6b4b7c016af91">backup</a> (const char *fname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">renames fname to fname.bak  <a href="#a7fcfe94986a09242c5b6b4b7c016af91"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a72e38b8773b63e202dbebc40c3346988">filepart</a> (const char *fullname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get the file component of fullname  <a href="#a72e38b8773b63e202dbebc40c3346988"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#aecc816a0cd57de3c3aca73950ec47329">pathpart</a> (const char *fullname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get the path component of fullname  <a href="#aecc816a0cd57de3c3aca73950ec47329"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a70474eaf20d7c9cbd95b9d2b6fb6eb55">md5hash</a> (const char *fname)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">create md5 hash for file fname  <a href="#a70474eaf20d7c9cbd95b9d2b6fb6eb55"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a8f1e7d22607878c7dc4b545507dea421">nucleusIDLformat</a> (const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">convert name e.g. "Si28" into IDL format  <a href="#a8f1e7d22607878c7dc4b545507dea421"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="utils_8h.html#a39a52b93ea85c4935b19580bfe57f60e">readstringsfromfile</a> (const char *fname, int *<a class="el" href="donlp2_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, char *string[])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">read list of strings from file  <a href="#a39a52b93ea85c4935b19580bfe57f60e"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a7fcfe94986a09242c5b6b4b7c016af91"></a><!-- doxytag: member="utils.h::backup" ref="a7fcfe94986a09242c5b6b4b7c016af91" args="(const char *fname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int backup </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fname</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>renames fname to fname.bak </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00136">136</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>References <a class="el" href="utils_8c_source.html#l00118">ensuredir()</a>.</p>

<p>Referenced by <a class="el" href="minenergy_8c_source.html#l00071">main()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> backupname[1024];

  <span class="keywordflow">if</span> (!access(fname, F_OK)) {
    <a class="code" href="utils_8c.html#a91bd1e9936bf548fc21c811e258c81e9" title="check for existence, create if not of directory">ensuredir</a>(<span class="stringliteral">&quot;BAK&quot;</span>);
    sprintf(backupname, <span class="stringliteral">&quot;BAK/%s-%d&quot;</span>, fname, (<span class="keywordtype">int</span>) time(NULL));
    <span class="keywordflow">return</span> rename(fname, backupname);
  }
  <span class="keywordflow">return</span> 0;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="afef28a69be6bfcf3523c2875ccab3ab7"></a><!-- doxytag: member="utils.h::createinfo" ref="afef28a69be6bfcf3523c2875ccab3ab7" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void createinfo </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>argv</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>save info about running process </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00032">32</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>References <a class="el" href="utils_8c_source.html#l00066">curdate()</a>, <a class="el" href="utils_8c.html#aea0cb3ebd7907cbc13689cc340699169">cuserid()</a>, <a class="el" href="git__version_8c_source.html#l00001">git_version()</a>, and <a class="el" href="utils_8c_source.html#l00057">hostname()</a>.</p>

<p>Referenced by <a class="el" href="calcbasisovlap_8c_source.html#l00087">main()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> i; 
  <span class="keywordtype">char</span> *c = infostring;

  sprintf(c, <span class="stringliteral">&quot;# FMD git: %s \n#\n&quot;</span>, <a class="code" href="git__version_8c.html#aae6486f29a77bc5e565d66351c027c1a">git_version</a>()); 
  sprintf(c+strlen(infostring), <span class="stringliteral">&quot;# %s @ %s, %s\n&quot;</span>, <a class="code" href="utils_8c.html#aea0cb3ebd7907cbc13689cc340699169">cuserid</a>(NULL), <a class="code" href="utils_8c.html#acb75231d7af21b8640d6850df286aaa2" title="returns string with hostname">hostname</a>(), <a class="code" href="utils_8c.html#ac3e439e4220ebb26c7bf1bffc5665795" title="returns string with current time and date">curdate</a>());
  sprintf(c+strlen(infostring), <span class="stringliteral">&quot;# &quot;</span>);
  <span class="keywordflow">for</span> (i=0; i&lt;argc; i++)
    sprintf(c+strlen(infostring), <span class="stringliteral">&quot;%s &quot;</span>, argv[i]);
  sprintf(c+strlen(infostring), <span class="stringliteral">&quot;\n&quot;</span>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac3e439e4220ebb26c7bf1bffc5665795"></a><!-- doxytag: member="utils.h::curdate" ref="ac3e439e4220ebb26c7bf1bffc5665795" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* curdate </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns string with current time and date </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00066">66</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>References <a class="el" href="utils_8c_source.html#l00087">stripstr()</a>.</p>

<p>Referenced by <a class="el" href="utils_8c_source.html#l00032">createinfo()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  time_t curtime;
  <span class="keyword">struct </span>tm *curtimep;

  curtime = time(NULL);
  curtimep = localtime(&amp;curtime);

  <span class="keywordflow">return</span> (<a class="code" href="utils_8c.html#af86aada130a5db5b0f52154718d67c44" title="strips strip from str">stripstr</a>(asctime(curtimep),<span class="stringliteral">&quot;\n&quot;</span>));
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a91bd1e9936bf548fc21c811e258c81e9"></a><!-- doxytag: member="utils.h::ensuredir" ref="a91bd1e9936bf548fc21c811e258c81e9" args="(const char *dirname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ensuredir </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>dirname</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>check for existence, create if not of directory </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00118">118</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>Referenced by <a class="el" href="utils_8c_source.html#l00136">backup()</a>, <a class="el" href="minenergycon_8c_source.html#l00081">main()</a>, <a class="el" href="Projection_8c_source.html#l00390">writeprojectedMBMEtoFile()</a>, and <a class="el" href="MultiSlaterDet_8c_source.html#l00497">writeprojectedMultiMBMEtoFile()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>stat dirstat;

  <span class="keywordflow">if</span> (!stat(dirname, &amp;dirstat)) {
    <span class="keywordflow">if</span> (!S_ISDIR(dirstat.st_mode)) {
      fprintf(stderr, <span class="stringliteral">&quot;%s is not a directory\n&quot;</span>, dirname);
      exit(-1);
    }
  } <span class="keywordflow">else</span> {
    <span class="keywordflow">if</span> (mkdir(dirname, 0755)) {
      fprintf(stderr, <span class="stringliteral">&quot;couldn&#39;t create directory %s\n&quot;</span>, dirname);
      exit(-1);
    }
  }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a80285197256014b2324f0b874a91cb19"></a><!-- doxytag: member="utils.h::fileexists" ref="a80285197256014b2324f0b874a91cb19" args="(const char *fname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fileexists </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fname</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>check if file exists and is readable (returns 0 for success) </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00106">106</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>Referenced by <a class="el" href="Projection_8c_source.html#l00526">readprojectedMBMEfromFile()</a>, and <a class="el" href="MultiSlaterDet_8c_source.html#l00193">readprojectedMultiMBMEfromFile()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>stat filestat;

  <span class="keywordflow">if</span> (!stat(fname, &amp;filestat))
    <span class="keywordflow">if</span> (S_ISREG(filestat.st_mode))
      <span class="keywordflow">return</span> 0;

  <span class="keywordflow">return</span> -1;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a72e38b8773b63e202dbebc40c3346988"></a><!-- doxytag: member="utils.h::filepart" ref="a72e38b8773b63e202dbebc40c3346988" args="(const char *fullname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* filepart </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fullname</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get the file component of fullname </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00149">149</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>Referenced by <a class="el" href="calcenergyproj_8c_source.html#l00052">main()</a>, <a class="el" href="Projection_8c_source.html#l00526">readprojectedMBMEfromFile()</a>, <a class="el" href="MultiSlaterDet_8c_source.html#l00193">readprojectedMultiMBMEfromFile()</a>, <a class="el" href="Projection_8c_source.html#l00390">writeprojectedMBMEtoFile()</a>, and <a class="el" href="MultiSlaterDet_8c_source.html#l00497">writeprojectedMultiMBMEtoFile()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> *p;
  <span class="keywordtype">char</span> *filep;

  <span class="keywordflow">if</span> ((p = strrchr(fullname, <span class="charliteral">&#39;/&#39;</span>))) {
    filep = (<span class="keywordtype">char</span>*) malloc(strlen(p)*<span class="keyword">sizeof</span>(char));
    strcpy(filep, p+1);
  } <span class="keywordflow">else</span> {
    filep = (<span class="keywordtype">char</span>*) malloc((strlen(fullname)+1)*<span class="keyword">sizeof</span>(char));
    strcpy(filep, fullname);
  }
  <span class="keywordflow">return</span> filep;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae3c710edac30cf257199e6595212a75a"></a><!-- doxytag: member="utils.h::fprintinfo" ref="ae3c710edac30cf257199e6595212a75a" args="(FILE *fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fprintinfo </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>fp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>print info about running process </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00046">46</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>Referenced by <a class="el" href="MinimizerDONLP2_8c_source.html#l00150">egradf()</a>, <a class="el" href="calcbasisovlap_8c_source.html#l00087">main()</a>, <a class="el" href="Projection_8c_source.html#l01836">writeMulticonfigfile()</a>, <a class="el" href="MultiSlaterDet_8c_source.html#l01017">writeMultiEigenstatestoFile()</a>, and <a class="el" href="MultiSlaterDet_8c_source.html#l01051">writeMultiMulticonfigfile()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  fputs(infostring, fp);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a109d01ec3cb7ea341ed78e31316661b8"></a><!-- doxytag: member="utils.h::gzprintinfo" ref="a109d01ec3cb7ea341ed78e31316661b8" args="(gzFile fp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gzprintinfo </td>
          <td>(</td>
          <td class="paramtype">gzFile&nbsp;</td>
          <td class="paramname"> <em>fp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>print info about running process </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00051">51</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>Referenced by <a class="el" href="Projection_8c_source.html#l00390">writeprojectedMBMEtoFile()</a>, and <a class="el" href="MultiSlaterDet_8c_source.html#l00497">writeprojectedMultiMBMEtoFile()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  gzputs(fp, infostring);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="acb75231d7af21b8640d6850df286aaa2"></a><!-- doxytag: member="utils.h::hostname" ref="acb75231d7af21b8640d6850df286aaa2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* hostname </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns string with hostname </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00057">57</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>Referenced by <a class="el" href="utils_8c_source.html#l00032">createinfo()</a>, and <a class="el" href="calcenergyprojks_8c_source.html#l00052">main()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span>* host = (<span class="keywordtype">char</span>*) malloc(255*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));

  gethostname(host, 255);
  <span class="keywordflow">return</span> host;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a70474eaf20d7c9cbd95b9d2b6fb6eb55"></a><!-- doxytag: member="utils.h::md5hash" ref="a70474eaf20d7c9cbd95b9d2b6fb6eb55" args="(const char *fname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* md5hash </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fname</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>create md5 hash for file fname </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00183">183</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>References <a class="el" href="utils_8c_source.html#l00182">BUFSIZE</a>, <a class="el" href="md5_8c_source.html#l00323">md5_append()</a>, <a class="el" href="md5_8c_source.html#l00361">md5_finish()</a>, and <a class="el" href="md5_8c_source.html#l00313">md5_init()</a>.</p>

<p>Referenced by <a class="el" href="ParameterizationClusterFMD_8c_source.html#l00107">ClusterFMDread()</a>, <a class="el" href="ParameterizationCluster_8c_source.html#l00091">Clusterread()</a>, <a class="el" href="ParameterizationClustersFMD_8c_source.html#l00107">ClustersFMDread()</a>, <a class="el" href="ParameterizationCoreFMD_8c_source.html#l00099">CoreFMDread()</a>, <a class="el" href="DiClusterMulticonfig_8c_source.html#l00362">DiClusterMulticonfigRead()</a>, <a class="el" href="DiClusterMultiProjSlaterDet_8c_source.html#l00253">DiClusterMultiProjSlaterDetRead()</a>, <a class="el" href="DiClusterProjParSlaterDet_8c_source.html#l00155">DiClusterProjSlaterDetRead()</a>, <a class="el" href="Projection_8c_source.html#l01873">readMulticonfigfile()</a>, <a class="el" href="MultiSlaterDet_8c_source.html#l01088">readMultiMulticonfigfile()</a>, <a class="el" href="Projection_8c_source.html#l00526">readprojectedMBMEfromFile()</a>, <a class="el" href="MultiSlaterDet_8c_source.html#l00193">readprojectedMultiMBMEfromFile()</a>, <a class="el" href="Projection_8c_source.html#l01836">writeMulticonfigfile()</a>, <a class="el" href="MultiSlaterDet_8c_source.html#l01017">writeMultiEigenstatestoFile()</a>, <a class="el" href="MultiSlaterDet_8c_source.html#l01051">writeMultiMulticonfigfile()</a>, <a class="el" href="Projection_8c_source.html#l00390">writeprojectedMBMEtoFile()</a>, and <a class="el" href="MultiSlaterDet_8c_source.html#l00497">writeprojectedMultiMBMEtoFile()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <a class="code" href="structmd5__state__s.html">md5_state_t</a> state;
  <a class="code" href="md5_8h.html#a7766d96ec42fb9d9608fdf101e3be092">md5_byte_t</a> digest[16];
  <span class="keywordtype">char</span>* hex_output = malloc(33*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
  <span class="keywordtype">int</span> di;
  FILE* fp;
  <span class="keywordtype">char</span> buf[BUFSIZE];

  <span class="keywordflow">if</span> (!(fp = fopen(fname, <span class="stringliteral">&quot;r&quot;</span>))) {
    fprintf(stderr, <span class="stringliteral">&quot;couldn&#39;t open %s for reading\n&quot;</span>, fname);
    exit(-1);
  }

  <a class="code" href="md5_8c.html#a92b88e6e65a2f3a2db4ab6ae8cc9ad54">md5_init</a>(&amp;state);
  <span class="keywordflow">while</span>(1) {
    fgets(buf, <a class="code" href="utils_8c.html#aeca034f67218340ecb2261a22c2f3dcd">BUFSIZE</a>, fp);
    <span class="keywordflow">if</span> (feof(fp)) <span class="keywordflow">break</span>;
    <a class="code" href="md5_8c.html#a345851d2511c7174fdbf953588e4f85d">md5_append</a>(&amp;state, (<span class="keyword">const</span> <a class="code" href="md5_8h.html#a7766d96ec42fb9d9608fdf101e3be092">md5_byte_t</a> *) buf, strlen(buf));
  }
  <a class="code" href="md5_8c.html#af926e22dea5f31719375681662188fac">md5_finish</a>(&amp;state, digest);
  fclose(fp);
  
  <span class="keywordflow">for</span> (di=0; di&lt;16; di++)
    sprintf(hex_output+di*2, <span class="stringliteral">&quot;%02x&quot;</span>, digest[di]);

  <span class="keywordflow">return</span> hex_output;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8f1e7d22607878c7dc4b545507dea421"></a><!-- doxytag: member="utils.h::nucleusIDLformat" ref="a8f1e7d22607878c7dc4b545507dea421" args="(const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* nucleusIDLformat </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>convert name e.g. "Si28" into IDL format </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00213">213</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>Referenced by <a class="el" href="calcdens_8c_source.html#l00029">main()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keywordtype">int</span> i=0;
  <span class="keywordtype">char</span>* idlstr;

  idlstr = (<span class="keywordtype">char</span>*) malloc(9*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
  idlstr[i++] = <span class="charliteral">&#39;!&#39;</span>; idlstr[i++] = <span class="charliteral">&#39;U&#39;</span>;
  <span class="keywordflow">if</span> (isdigit(name[1]))
    idlstr[i++] = name[1];
  <span class="keywordflow">if</span> (isdigit(name[2]))
    idlstr[i++] = name[2];
  <span class="keywordflow">if</span> (isdigit(name[3]))
    idlstr[i++] = name[3];
  idlstr[i++] = <span class="charliteral">&#39;!&#39;</span>; idlstr[i++] = <span class="charliteral">&#39;N&#39;</span>;
  <span class="keywordflow">if</span> (isalpha(name[0])) 
    idlstr[i++] = name[0];
  <span class="keywordflow">if</span> (isalpha(name[1])) 
    idlstr[i++] = name[1];
  idlstr[i] = <span class="charliteral">&#39;\0&#39;</span>;

  <span class="keywordflow">return</span> idlstr; 
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aecc816a0cd57de3c3aca73950ec47329"></a><!-- doxytag: member="utils.h::pathpart" ref="aecc816a0cd57de3c3aca73950ec47329" args="(const char *fullname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* pathpart </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fullname</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get the path component of fullname </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00164">164</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> *p, *pp;
  <span class="keywordtype">char</span>* pathp;
  <span class="keyword">const</span> <span class="keywordtype">char</span> *i;

  <span class="keywordflow">if</span> ((p = strrchr(fullname, <span class="charliteral">&#39;/&#39;</span>))) {
    pathp = (<span class="keywordtype">char</span>*) malloc((strlen(fullname)-strlen(p)+2)*<span class="keyword">sizeof</span>(char));
    <span class="keywordflow">for</span> (pp = pathp, i = fullname; i&lt;=p; i++)
      *pp++ = *i;
    *pp = <span class="charliteral">&#39;\0&#39;</span>;
  } <span class="keywordflow">else</span> {
    pathp = (<span class="keywordtype">char</span>*) malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
    *pathp = <span class="charliteral">&#39;\0&#39;</span>;
  }
  <span class="keywordflow">return</span> pathp;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a39a52b93ea85c4935b19580bfe57f60e"></a><!-- doxytag: member="utils.h::readstringsfromfile" ref="a39a52b93ea85c4935b19580bfe57f60e" args="(const char *fname, int *n, char *string[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readstringsfromfile </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>string</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>read list of strings from file </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00238">238</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>References <a class="el" href="utils_8c_source.html#l00237">STRLEN</a>.</p>

<p>Referenced by <a class="el" href="calcbasisovlap_8c_source.html#l00087">main()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  FILE* fp;

  <span class="keywordflow">if</span> (!(fp = fopen(fname, <span class="stringliteral">&quot;r&quot;</span>))) {
    fprintf(stderr, <span class="stringliteral">&quot;couldn&#39;t open %s for reading\n&quot;</span>, fname);
    exit(-1);
  }

  <span class="keywordtype">int</span> i=0; 
  <span class="keywordtype">int</span> res;
  <span class="keywordflow">do</span> {
    <span class="keywordtype">string</span>[i] = malloc(<a class="code" href="utils_8c.html#a278cf415676752815cfb411cb0b32802">STRLEN</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));
    res = fscanf(fp, <span class="stringliteral">&quot; %s&quot;</span>, <span class="keywordtype">string</span>[i]);
    i++;
  } <span class="keywordflow">while</span> (res != EOF);

  fclose(fp);

  *<a class="code" href="HOBasis_8c.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> = i-1;

  <span class="keywordflow">return</span> 0;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af86aada130a5db5b0f52154718d67c44"></a><!-- doxytag: member="utils.h::stripstr" ref="af86aada130a5db5b0f52154718d67c44" args="(char *str, const char *strip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* stripstr </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>strip</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>strips strip from str </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00087">87</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>Referenced by <a class="el" href="ParameterizationAlphaA_8c_source.html#l00071">AlphaAread()</a>, <a class="el" href="ParameterizationAlphaC_8c_source.html#l00071">AlphaCread()</a>, <a class="el" href="ParameterizationAlpha_8c_source.html#l00065">Alpharead()</a>, <a class="el" href="ParameterizationAMDA_8c_source.html#l00087">AMDAread()</a>, <a class="el" href="ParameterizationAMDAS_8c_source.html#l00091">AMDASread()</a>, <a class="el" href="ParameterizationAMDd_8c_source.html#l00086">AMDdread()</a>, <a class="el" href="ParameterizationAMD_8c_source.html#l00085">AMDread()</a>, <a class="el" href="ParameterizationAMDS_8c_source.html#l00089">AMDSread()</a>, <a class="el" href="ParameterizationClusterFMD_8c_source.html#l00107">ClusterFMDread()</a>, <a class="el" href="ParameterizationCluster_8c_source.html#l00091">Clusterread()</a>, <a class="el" href="ParameterizationClustersFMD_8c_source.html#l00107">ClustersFMDread()</a>, <a class="el" href="ParameterizationCoreFMD_8c_source.html#l00099">CoreFMDread()</a>, <a class="el" href="utils_8c_source.html#l00066">curdate()</a>, <a class="el" href="ParameterizationFMDd3h_8c_source.html#l00109">FMDd3hread()</a>, <a class="el" href="ParameterizationFMD_8c_source.html#l00087">FMDread()</a>, <a class="el" href="ParameterizationFMDreal_8c_source.html#l00087">FMDrealread()</a>, <a class="el" href="ParameterizationFMDr_8c_source.html#l00089">FMDrread()</a>, <a class="el" href="ParameterizationFMDS_8c_source.html#l00090">FMDSread()</a>, <a class="el" href="ParameterizationFMDvxz_8c_source.html#l00086">FMDvxzread()</a>, <a class="el" href="calcbasisovlap_8c_source.html#l00087">main()</a>, <a class="el" href="Interaction_8c_source.html#l00045">readInteractionfromFile()</a>, <a class="el" href="MultiSlaterDet_8c_source.html#l00096">readMultiSlaterDetfromFile()</a>, <a class="el" href="Parameterization_8c_source.html#l00062">readParafromFile()</a>, <a class="el" href="Projection_8c_source.html#l00433">readprojectedMBME()</a>, and <a class="el" href="SlaterDet_8c_source.html#l00088">readSlaterDet()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span>* cp;

  <span class="keywordflow">if</span> ((cp = strstr(str, strip)))
    *cp = <span class="charliteral">&#39;\0&#39;</span>;

  <span class="keywordflow">return</span> str;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab513af03cb4d827e200043bbc98cad12"></a><!-- doxytag: member="utils.h::strjoin" ref="ab513af03cb4d827e200043bbc98cad12" args="(const char *stra, const char *strb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* strjoin </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>stra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>strb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>join two strings </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00098">98</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>Referenced by <a class="el" href="calcenergyproj_8c_source.html#l00052">main()</a>, <a class="el" href="Projection_8c_source.html#l00526">readprojectedMBMEfromFile()</a>, and <a class="el" href="Projection_8c_source.html#l00390">writeprojectedMBMEtoFile()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span>* c = malloc(strlen(stra)+strlen(strb));
  sprintf(c, <span class="stringliteral">&quot;%s%s&quot;</span>, stra, strb);
  <span class="keywordflow">return</span> c;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a35b218ad75944a14eabbb6381ca2e970"></a><!-- doxytag: member="utils.h::svn_version" ref="a35b218ad75944a14eabbb6381ca2e970" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* svn_version </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get current SVN version </p>

</div>
</div>
<a class="anchor" id="a8a337ab7687846825969429634871de6"></a><!-- doxytag: member="utils.h::usertime" ref="a8a337ab7687846825969429634871de6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int usertime </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>returns process user time in seconds </p>

<p>Definition at line <a class="el" href="utils_8c_source.html#l00078">78</a> of file <a class="el" href="utils_8c_source.html">utils.c</a>.</p>

<p>Referenced by <a class="el" href="minenergy_8c_source.html#l00071">main()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
  <span class="keyword">struct </span>tms t;

  times(&amp;t);
  <span class="keywordflow">return</span> (t.tms_utime / sysconf(_SC_CLK_TCK));
}
</pre></div></p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Dec 4 2012 14:05:37 for FMD by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
